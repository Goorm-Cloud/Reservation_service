<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ parking_lot.parkinglot_name }} ì˜ˆì•½</title>

    <!-- ğŸš€ ì •ì  íŒŒì¼ ë¡œë“œ ê²½ë¡œ ìˆ˜ì • -->
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/bootstrap.min.css') }}">

    {% if request.path.startswith('/reservation') %}
        <!-- âœ… ì˜ˆì•½ í˜ì´ì§€ì—ì„œëŠ” reservation ì„œë¹„ìŠ¤ì˜ ì •ì  íŒŒì¼ ì‚¬ìš© -->
        <link rel="stylesheet" href="/reservation/static/css/reservation_style.css">
    {% else %}
        <!-- âœ… ê¸°ë³¸ ì •ì  íŒŒì¼ ì‚¬ìš© -->
        <link rel="stylesheet" href="{{ url_for('static', filename='css/reservation_style.css') }}">
    {% endif %}
</head>
<body>
    {% include "navbar.html" %}

    <div class="container">
        <h2 class="text-center mt-3">{{ parking_lot.parkinglot_name }} ì˜ˆì•½í•˜ê¸°</h2>

        <ul class="list-group mt-3">
            <li class="list-group-item"><strong>ì´ë¦„:</strong> {{ parking_lot.parkinglot_name }}</li>
            <li class="list-group-item"><strong>ìœ„ì¹˜:</strong> {{ parking_lot.parkinglot_add }}</li>
        </ul>

        <!-- ğŸš€ ì˜ˆì•½ ìƒíƒœ ë©”ì‹œì§€ -->
        <div id="reservation-message" class="alert d-none mt-3" role="alert"></div>

        <!-- ğŸš€ Flask-WTF í¼ ë Œë”ë§ -->
        <form id="reservationForm" method="POST" action="{{ url_for('reservation_bp.reserve_parking_route', parkinglot_id=parking_lot.parkinglot_id) }}" class="mt-3">
            {{ form.hidden_tag() }}  <!-- CSRF ë°©ì§€ë¥¼ ìœ„í•œ hidden íƒœê·¸ -->

            <div class="mb-3">
                {{ form.email.label(class="form-label") }}
                {{ form.email(class="form-control") }}
                {% if form.email.errors %}
                    <div class="alert alert-danger mt-1">
                        {{ form.email.errors[0] }}
                    </div>
                {% endif %}
            </div>

            <button type="submit" class="btn btn-primary w-100">{{ form.submit.label }}</button>
        </form>

        <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
        <div class="text-center mt-4">
            <a href="{{ config['MAP_SERVICE_URL'] }}" class="btn btn-outline-secondary">ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
        </div>
    </div>

    <!-- ğŸš€ ì •ì  íŒŒì¼ ë¡œë“œ ê²½ë¡œ ìˆ˜ì • -->
    <script src="{{ url_for('static', filename='bootstrap/bootstrap.bundle.min.js') }}"></script>

    {% if request.path.startswith('/reservation') %}
        <!-- âœ… ì˜ˆì•½ í˜ì´ì§€ì—ì„œëŠ” reservation ì„œë¹„ìŠ¤ì˜ ì •ì  íŒŒì¼ ì‚¬ìš© -->
        <script src="/reservation/static/js/reservation_scripts.js"></script>
    {% else %}
        <!-- âœ… ê¸°ë³¸ ì •ì  íŒŒì¼ ì‚¬ìš© -->
        <script src="{{ url_for('static', filename='js/reservation_scripts.js') }}"></script>
    {% endif %}
</body>
</html>